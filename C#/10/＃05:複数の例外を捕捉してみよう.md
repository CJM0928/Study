## 複数の例外を捕捉してみよう (Multiple catch) — C# ↔ Java

- 하나의 try 블록에 대해 여러 개의 catch 를 둘 수 있다.
- 위에서 아래로 순서대로 예외 타입을 검사한다.
- 더 구체적인 예외(FormatException, DivideByZeroException) 를 먼저,
  마지막에 가장 상위 타입(Exception) 을 두는 것이 기본 패턴이다.

### C# 코드 + 해설

```
using System;

class Lesson10
{
    public static void Main()
    {
        Console.WriteLine("Hello World");

        try
        {
            // 1. 문자열 입력
            int number = int.Parse(Console.ReadLine());
            // 2. 100 / number 계산
            int answer = 100 / number;
            Console.WriteLine(answer);
        }
        // ① 숫자가 아닌 문자열을 입력했을 때
        catch (FormatException e)
        {
            Console.Error.WriteLine("引数が無効な形式です");  // 인수가 잘못된 형식입니다
            Console.Error.WriteLine(e);
        }
        // ② 0을 입력했을 때
        catch (DivideByZeroException e)
        {
            Console.Error.WriteLine("0では割り算できません");
            Console.Error.WriteLine(e);
        }
        // ③ 그 외 모든 예외
        catch (Exception e)
        {
            Console.Error.WriteLine("例外を補足しました。");
            Console.Error.WriteLine(e);
        }
        finally
        {
            // 예외 발생 여부와 관계없이 항상 실행
            Console.WriteLine("Hello C#");
        }
    }
}
```

---

### 동작 시나리오 정리

| 입력 값        | 발생 예외                   | 실행되는 catch 블록 | 출력 요약                              |
| ----------- | ----------------------- | ------------- | ---------------------------------- |
| `10`        | 예외 없음                   | catch 실행 안 됨  | 100 / 10 = 10, 이후 `Hello C#`       |
| `0`         | `DivideByZeroException` | 두 번째 catch    | “0では割り算できません” + 예외 내용 + `Hello C#` |
| `abc`       | `FormatException`       | 첫 번째 catch    | “引数が無効な形式です” + 예외 내용 + `Hello C#`  |
| 기타 예상 못한 예외 | `Exception`             | 세 번째 catch    | “例外を補足しました。” + 예외 내용 + `Hello C#`  |

---

### 중요한 포인트
- catch 순서가 중요하다
  - 더 구체적인 예외를 위에,
  - 가장 상위 타입인 Exception 은 맨 마지막에 둬야 한다.
  - 만약 catch (Exception e) 를 맨 위에 두면, 아래 catch 는 절대 도달하지 않는 코드가 된다.
- 사용자 친화적인 메시지 + 기술적인 정보 분리 가능
```
Console.Error.WriteLine("0では割り算できません"); // 사용자용
Console.Error.WriteLine(e);                      // 로그용(개발자용)
```

- Console.Error
  - 표준 출력이 아니라 표준 에러 스트림으로 출력
  - 로그/에러만 분리하고 싶을 때 사용 (Java의 System.err 와 같음)

---

### Java 버전으로 쓰면

```
import java.util.*;

public class Lesson10 {
    public static void main(String[] args) {
        System.out.println("Hello World");
        Scanner sc = new Scanner(System.in);

        try {
            int number = Integer.parseInt(sc.nextLine());
            int answer = 100 / number;
            System.out.println(answer);
        } catch (NumberFormatException e) {
            System.err.println("引数が無効な形式です");
            System.err.println(e);
        } catch (ArithmeticException e) {
            System.err.println("0では割り算できません");
            System.err.println(e);
        } catch (Exception e) {
            System.err.println("例外を捕捉しました。");
            System.err.println(e);
        } finally {
            System.out.println("Hello Java");
        }
    }
}
```

---

### C# ↔ Java 다중 catch 비교표

| 개념        | C#                        | Java                    | 비고                |
| --------- | ------------------------- | ----------------------- | ----------------- |
| 다중 catch  | 지원                        | 지원                      | 구조 동일             |
| 순서 중요     | O                         | O                       | 구체적인 예외 → 상위 예외 순 |
| 숫자 변환 예외  | `FormatException`         | `NumberFormatException` | 이름만 다름            |
| 0 나누기 예외  | `DivideByZeroException`   | `ArithmeticException`   |                   |
| 최상위 타입    | `Exception`               | `Exception`             | 공통 부모             |
| 에러 출력 스트림 | `Console.Error.WriteLine` | `System.err.println`    | 같은 개념             |

